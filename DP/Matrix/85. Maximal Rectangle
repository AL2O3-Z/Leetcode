class Solution {
public:
    int maximalRectangle(vector<vector<char>>& matrix) {
        int m = matrix.size();
        if (m == 0) return 0;
        int n = matrix[0].size();
        if (n == 0) return 0;
        int res = 0;
        vector<vector<int>> dp(m + 1, vector<int>(n + 1));
        for (int i = 1; i <= m; i++) {
            for (int j = 1; j <= n; j++) {
                if (matrix[i - 1][j - 1] == '0') continue;
                dp[i][j] = dp[i][j - 1] + 1;
                int min_col = dp[i][j];
                int max_squ = dp[i][j];
                int w = 1;
                for (int k = i - 1; k >= 0; k--) {
                    w++;
                    min_col = min(min_col, dp[k][j]);
                    max_squ = max(max_squ, min_col * w);
                }
                res = max(res, max_squ);
            } 
        }
        return res;
    }
};
